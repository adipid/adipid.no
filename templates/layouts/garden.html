{% extends "base/base.html" %}

{% block head %}
  {% set title = section.title ~ " - " ~ config.title %}
  {% set description = section.description | default(value=config.description) %}
{% endblock head %}

{% block content %}
<section class="garden">
  <h1>{{ section.title }}</h1>
  {% if section.content %}
    {{ section.content | safe }}
  {% endif %}
  {% if section.subsections %}
    <ul class="sections__list">
    {% for sub_section in section.subsections %}
      {% set subsection = get_section(path=sub_section) %}
      <li class="list__item">
        <a href="{{ subsection.permalink }}">
          {{ subsection.title }}
        </a>
        <ul class="pages__list">
          {% for page in subsection.pages %}
            <li class="list__item">
                <a href="{{ page.permalink }}">
                  {{ page.title }}
                </a>
            </li>
          {% endfor %}
        </ul>
      </li>
      {% endfor %}
    </ul>
    {% if section.pages %}
      <ul class="list">
        <li class="list__item">
          Other
          <ul class="pages__list">
            {% for page in section.pages %}
              <li class="list__item">
                  <a href="{{ page.permalink }}">
                    {{ page.title }}
                  </a>
              </li>
            {% endfor %}
          </ul>
        </li>
      </ul>
    {% endif %}
  {% else %}
    {% set parent = get_section(path=section.ancestors[1]) %}
    <a href="{{ parent.permalink }}">{{ parent.title }}</a>
    <ul class="pages__list">
      {% for page in section.pages %}
        <li class="list__item">
            <a href="{{ page.permalink }}">
              {{ page.title }}
            </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>

{% endblock content %}

