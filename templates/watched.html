{% extends "base/base.html" %}

{% block head %}
  {% if section %}
    {% set title = section.title ~ " - " ~ config.title %}
    {% set description = section.description | default(value=config.description) %}
    {% if section.updated %}
      {% set updated = section.updated | date(format=config.extra.date_format) %}
    {% endif %}
    {% if section.content %}
      {% set content = section.content %}
    {% endif %}
  {% endif %}
{% endblock head %}

{% block content %}

<section class="page-content">
  <h1 class="page-title">{{ section.title | default(value=page.title) }}</h1>
  {% if content %}
    {{ content | safe }}
  {% endif %}
  {% set section = get_section(path="watched/_index.md") %}
  <table class="review">
    <tr>
      <th>Name</th>
      <th>Director</th>
      <th>Watched</th>
      <th>Rating</th>
    </tr>
    {% for entry in section.pages %}
      <tr>
        {% if entry.extra.reviewed %}
          <td>
            <a href="{{ entry.path }}">
              {{ entry.title }}
            </a>
          </td>
        {% else %}
          <td>{{ entry.title }}</td>
        {% endif %}
        <td>
          {% for director in entry.taxonomies.director %}
            {{ director }}{% if not loop.last %},{% endif %}
          {% endfor %}
        </td>
        <td>{{ entry.date }}</td>
        {% set rating = entry.taxonomies.my_rating[0] | int %}
        <td>{% for star in range(end=rating) %}â˜…{% endfor %}</td>
      </tr>
    {% endfor %}
  </table>
</section>

{% endblock content %}

