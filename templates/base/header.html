<header class="header" aria-label="Main navigation">
  <a class="header__logo" rel="me" href="{{ get_url(path="@/_index.md", lang=lang) }}" aria-label="Home">
    {{ load_data(path="static/img/logo.svg") | safe }}
  </a>

  <nav class="header__nav">
    <ul class="nav__list">

      {% for menu_item in config.extra.nav %}
        {% set_global path = menu_item.path %}
        {% if lang == "no" %}
          {% set pre_path = path | split(pat=".") | first %}
          {% set_global path = pre_path ~ "." ~ lang ~ ".md" %}
        {% endif %}
        {% set_global path = path | replace(from="@/", to="") %}
        {% set page = get_section(path=path) %}
        <li class="nav__item" {% if current_url and current_url == page.permalink %}aria-current="true"{% endif %}>

          {% if current_url and current_url == page.permalink %}
            {{ page.title | safe }}
          {% else %}
          <a class="nav__item--link" href="{{ page.permalink }}">
            {{ page.title | safe }}
          </a>
          {% endif %}

        </li>
      {% endfor %}
      {% set_global url = "/" %}
      {% set_global translation = "" %}
      {% set_global swap_lang = "" %}
      {% if lang == "en" %}
        {% set_global swap_lang = "no" %}
        {% set_global url = "/no" %}
      {% else %}
        {% set_global swap_lang = "en" %}
      {% endif %}

      {% if page %}
        {% set_global translation = page.translations %}
      {% elif section %}
        {% set_global translation = section.translations %}
      {% endif %}
      {% for trans in translation %}
        {% if trans.lang == swap_lang %}
          {% set_global url = trans.permalink %}
        {% endif %}
      {% endfor %}
      <li class="nav__item">
        <a class="nav__item--link" href="{{ url }}">
          {% if lang == 'en' %}
            <span lang="no">Norsk</span>
          {% else %}
            <span lang="en">English</span>
          {% endif %}
        </a>
      </li>
    </ul>
  </nav>
</header>

